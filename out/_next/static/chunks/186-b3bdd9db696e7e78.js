"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[186],{285:(e,t,a)=>{a.d(t,{$:()=>c});var r=a(5155),n=a(2115),i=a(4253),o=a(2085),s=a(9434);let d=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:a,variant:n,size:o,asChild:c=!1,...l}=e,u=c?i.DX:"button";return(0,r.jsx)(u,{className:(0,s.cn)(d({variant:n,size:o,className:a})),ref:t,...l})});c.displayName="Button"},3985:(e,t,a)=>{a.d(t,{RC:()=>l,Cs:()=>s,P_:()=>d,zh:()=>c,mI:()=>i});var r=a(2354);let n=[{id:"1",name:"منتج تجريبي 1",price:99.99,description:"هذا وصف تجريبي للمنتج الأول",image:"https://placehold.co/600x400.png",image_alt:"منتج تجريبي 1",ai_hint:"منتج عصري وأنيق",category_id:"1"},{id:"2",name:"منتج تجريبي 2",price:149.99,description:"هذا وصف تجريبي للمنتج الثاني",image:"https://placehold.co/600x400.png",image_alt:"منتج تجريبي 2",ai_hint:"منتج عملي ومفيد",category_id:"2"},{id:"3",name:"منتج تجريبي 3",price:199.99,description:"هذا وصف تجريبي للمنتج الثالث",image:"https://placehold.co/600x400.png",image_alt:"منتج تجريبي 3",ai_hint:"منتج فاخر وعالي الجودة",category_id:"1"}],i=(0,r.UU)("https://ebghltixenyygueymcpm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImViZ2hsdGl4ZW55eWd1ZXltY3BtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwODg0OTQsImV4cCI6MjA3MDY2NDQ5NH0.GHT4O30VRY0QNFU3OagalivbbEY-JRrPXRFOcRIbloQ");function o(e){let t=e.image||"https://placehold.co/600x400.png";if(i&&e.image&&!t.startsWith("http")&&!t.startsWith("data:")){let{data:e}=i.storage.from("products").getPublicUrl(t);t=e.publicUrl}return{id:String(e.id),name:e.name||"",price:e.price||0,description:e.description||"",image:t,image_alt:e.image_alt||e.name||"Product image",ai_hint:e.ai_hint||"",category_id:e.category_id||null}}async function s(e){if(!i)return console.warn("Supabase not configured, using fallback product"),n.find(t=>t.id===e);try{let{data:t,error:a}=await i.from("products").select("*").eq("id",e).single();if(a){if("PGRST116"===a.code)return;return console.error("Error fetching product ".concat(e," from Supabase:"),a),n.find(t=>t.id===e)}if(t)return o(t);return}catch(t){return console.error("Exception fetching product by id ".concat(e,": "),t),n.find(t=>t.id===e)}}async function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a=arguments.length>2?arguments[2]:void 0;if(!i){console.warn("Supabase not configured, using fallback products");let r=(e-1)*t,i=n;return a&&(i=i.filter(e=>e.category_id===a)),i.slice(r,r+t)}let r=(e-1)*t;try{let s=i.from("products").select("id, name, price, image").order("created_at",{ascending:!1}).range(r,r+t-1);a&&(s=s.eq("category_id",a));let{data:d,error:c}=await s;if(c){console.error("Error fetching products page ".concat(e,":"),c);let a=(e-1)*t;return n.slice(a,a+t)}return(d||[]).map(o)}catch(t){return console.error("Exception fetching products page ".concat(e,": "),t),[]}}async function c(e){if(!i||!e.trim())return[];try{let t=i.from("products").select("id, name, price, image").range(0,19);t=/^\d+$/.test(e.trim())?t.eq("barcode",e.trim()):t.ilike("name","%".concat(e.trim(),"%"));let{data:a,error:r}=await t.order("created_at",{ascending:!1});if(r)return console.error("Error searching products:",r),[];return(a||[]).map(o)}catch(e){return console.error("Exception searching products:",e),[]}}async function l(e){if(!i)return console.warn("Supabase not configured, returning null for order status"),null;let{data:t,error:a}=await i.from("orders").select("status").eq("user_id",e).order("created_at",{ascending:!1}).limit(1).single();return a||!t?null:t.status}},4469:(e,t,a)=>{a.d(t,{CartProvider:()=>s,_:()=>d});var r=a(5155),n=a(2115),i=a(3985);let o=(0,n.createContext)(void 0),s=e=>{let{children:t}=e,[a,s]=(0,n.useState)([]),[d,c]=(0,n.useState)([]),[l,u]=(0,n.useState)(!0);(0,n.useEffect)(()=>{try{let e=localStorage.getItem("cart");e?c(JSON.parse(e)):u(!1)}catch(e){console.error("Failed to parse cart from localStorage",e),u(!1)}},[]),(0,n.useEffect)(()=>{(async()=>{if(0===d.length){s([]),u(!1);return}u(!0);let e=[];for(let t of d){let a="string"==typeof t.id?parseInt(t.id,10):t.id;if(isNaN(a))continue;let r=await (0,i.Cs)(a);r&&e.push({...r,quantity:t.quantity})}s(e),u(!1)})()},[d]),(0,n.useEffect)(()=>{try{let e=a.map(e=>({id:e.id,quantity:e.quantity}));localStorage.setItem("cart",JSON.stringify(e))}catch(e){console.error("Could not save cart to localStorage",e)}},[a]);let p=e=>{s(t=>t.filter(t=>t.id!==e))},f=a.reduce((e,t)=>e+t.price*t.quantity,0),m=a.reduce((e,t)=>e+t.quantity,0);return(0,r.jsx)(o.Provider,{value:{cartItems:a,addToCart:e=>{s(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])},removeFromCart:p,updateQuantity:(e,t)=>{t<=0?p(e):s(a=>a.map(a=>a.id===e?{...a,quantity:t}:a))},clearCart:()=>{s([])},totalPrice:f,totalItems:m,isLoading:l},children:t})},d=()=>{let e=(0,n.useContext)(o);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},4838:(e,t,a)=>{a.d(t,{SQ:()=>p,_2:()=>f,lp:()=>m,mB:()=>g,rI:()=>l,ty:()=>u});var r=a(5155),n=a(2115),i=a(551),o=a(3158),s=a(518),d=a(154),c=a(9434);let l=i.bL,u=i.l9;i.YJ,i.ZL,i.Pb,i.z6,n.forwardRef((e,t)=>{let{className:a,inset:n,children:s,...d}=e;return(0,r.jsxs)(i.ZP,{ref:t,className:(0,c.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",a),...d,children:[s,(0,r.jsx)(o.A,{className:"ml-auto"})]})}).displayName=i.ZP.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(i.G5,{ref:t,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})}).displayName=i.G5.displayName;let p=n.forwardRef((e,t)=>{let{className:a,sideOffset:n=4,...o}=e;return(0,r.jsx)(i.ZL,{children:(0,r.jsx)(i.UC,{ref:t,sideOffset:n,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})})});p.displayName=i.UC.displayName;let f=n.forwardRef((e,t)=>{let{className:a,inset:n,...o}=e;return(0,r.jsx)(i.q7,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",a),...o})});f.displayName=i.q7.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,checked:o,...d}=e;return(0,r.jsxs)(i.H_,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:o,...d,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.VF,{children:(0,r.jsx)(s.A,{className:"h-4 w-4"})})}),n]})}).displayName=i.H_.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,...o}=e;return(0,r.jsxs)(i.hN,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.VF,{children:(0,r.jsx)(d.A,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=i.hN.displayName;let m=n.forwardRef((e,t)=>{let{className:a,inset:n,...o}=e;return(0,r.jsx)(i.JU,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",a),...o})});m.displayName=i.JU.displayName;let g=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(i.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...n})});g.displayName=i.wv.displayName},7481:(e,t,a)=>{a.d(t,{dj:()=>p});var r=a(2115);let n=0,i=new Map,o=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},s=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?o(a):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],c={toasts:[]};function l(e){c=s(c,e),d.forEach(e=>{e(c)})}function u(e){let{...t}=e,a=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>l({type:"DISMISS_TOAST",toastId:a});return l({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function p(){let[e,t]=r.useState(c);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,t,a)=>{a.d(t,{cn:()=>i});var r=a(2596),n=a(9688);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,r.$)(t))}}}]);