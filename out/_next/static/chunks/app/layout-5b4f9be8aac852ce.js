(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},1346:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,347,23)),Promise.resolve().then(s.t.bind(s,392,23)),Promise.resolve().then(s.bind(s,2736)),Promise.resolve().then(s.bind(s,6049)),Promise.resolve().then(s.bind(s,2558)),Promise.resolve().then(s.bind(s,8437)),Promise.resolve().then(s.bind(s,4469))},2558:(e,t,s)=>{"use strict";s.d(t,{Toaster:()=>v});var r=s(5155),a=s(7481),l=s(2115),n=s(6621),i=s(2085),o=s(5318),d=s(9434);let c=n.Kq,u=l.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.LM,{ref:t,className:(0,d.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...a})});u.displayName=n.LM.displayName;let m=(0,i.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),f=l.forwardRef((e,t)=>{let{className:s,variant:a,...l}=e;return(0,r.jsx)(n.bL,{ref:t,className:(0,d.cn)(m({variant:a}),s),...l})});f.displayName=n.bL.displayName,l.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.rc,{ref:t,className:(0,d.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...a})}).displayName=n.rc.displayName;let h=l.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.bm,{ref:t,className:(0,d.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...a,children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})});h.displayName=n.bm.displayName;let p=l.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.hE,{ref:t,className:(0,d.cn)("text-sm font-semibold",s),...a})});p.displayName=n.hE.displayName;let x=l.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,d.cn)("text-sm opacity-90",s),...a})});function v(){let{toasts:e}=(0,a.dj)();return(0,r.jsxs)(c,{children:[e.map(function(e){let{id:t,title:s,description:a,action:l,...n}=e;return(0,r.jsxs)(f,{...n,children:[(0,r.jsxs)("div",{className:"grid gap-1",children:[s&&(0,r.jsx)(p,{children:s}),a&&(0,r.jsx)(x,{children:a})]}),l,(0,r.jsx)(h,{})]},t)}),(0,r.jsx)(u,{})]})}x.displayName=n.VY.displayName},2736:(e,t,s)=>{"use strict";s.d(t,{BottomNavBar:()=>S});var r=s(5155),a=s(6874),l=s.n(a),n=s(8186),i=s(4815),o=s(7374),d=s(3349),c=s(7104),u=s(3896),m=s(285),f=s(4469),h=s(8437),p=s(2115),x=s(5695),v=s(3985),g=s(4838),b=s(5977),j=s(9434);let N=p.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(b.bL,{ref:t,className:(0,j.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a})});N.displayName=b.bL.displayName,p.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(b._V,{ref:t,className:(0,j.cn)("aspect-square h-full w-full",s),...a})}).displayName=b._V.displayName;let w=p.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(b.H4,{ref:t,className:(0,j.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a})});w.displayName=b.H4.displayName;var y=s(8082);let k=y.Kq,C=y.bL,A=y.l9,_=p.forwardRef((e,t)=>{let{className:s,sideOffset:a=4,...l}=e;return(0,r.jsx)(y.UC,{ref:t,sideOffset:a,className:(0,j.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})});function S(){var e,t;let{totalItems:s}=(0,f._)(),{user:a,loading:b}=(0,h.A)(),j=(0,x.useRouter)(),[y,S]=(0,p.useState)(!1),[R,L]=(0,p.useState)(null);(0,p.useEffect)(()=>{S(!0)},[]),(0,p.useEffect)(()=>{if(b)return;let e=async()=>{a&&L(await (0,v.RC)(a.id))};a&&e(),a||L(null)},[a,b]);let P=async()=>{await v.mI.auth.signOut(),j.push("/login"),j.refresh()},z=(null==a||null==(e=a.user_metadata)?void 0:e.full_name)||(null==a?void 0:a.email),E=(()=>{switch(R){case"pending":return{color:"text-orange-500",label:"الطلب قيد الانتظار"};case"preparing":return{color:"text-yellow-500",label:"الطلب قيد التحضير"};case"processing":return{color:"text-blue-500",label:"الطلب قيد التجهيز"};case"shipped":return{color:"text-purple-500",label:"تم شحن الطلب"};case"ready":return{color:"text-green-500",label:"الطلب جاهز"};case"cancelled":return{color:"text-red-500",label:"الطلب ملغي"};default:return{color:"text-muted-foreground/50",label:"لا توجد طلبات حالية"}}})();return(0,r.jsx)("header",{className:"bg-background/80 backdrop-blur-sm fixed bottom-0 left-0 right-0 z-40 border-t",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l(),{href:"/",className:"font-headline text-2xl font-bold text-primary hidden sm:inline-block",children:"اسواق سجاد"}),(0,r.jsx)(m.$,{variant:"ghost",size:"icon",asChild:!0,className:"sm:hidden",children:(0,r.jsx)(l(),{href:"/","aria-label":"الرئيسية",children:(0,r.jsx)(n.A,{className:"h-5 w-5"})})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4",children:[(0,r.jsx)(m.$,{variant:"ghost",size:"icon",asChild:!0,children:(0,r.jsx)(l(),{href:"/cart","aria-label":"سلة التسوق",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(i.A,{className:"h-6 w-6"}),y&&s>0&&(0,r.jsx)("span",{className:"absolute -top-2 -right-2 bg-destructive text-destructive-foreground rounded-full h-5 w-5 text-xs flex items-center justify-center",children:s})]})})}),b?null:a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k,{children:(0,r.jsxs)(C,{children:[(0,r.jsx)(A,{children:(0,r.jsx)(o.A,{className:"h-6 w-6 transition-colors duration-300 ".concat(E.color)})}),(0,r.jsx)(_,{children:(0,r.jsx)("p",{children:E.label})})]})}),(0,r.jsxs)(g.rI,{children:[(0,r.jsx)(g.ty,{asChild:!0,children:(0,r.jsx)(m.$,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:(0,r.jsx)(N,{className:"h-8 w-8",children:(0,r.jsx)(w,{children:(e=>{if(!e)return"U";let t=e.split(" ");return t.length>1?"".concat(t[0][0]).concat(t[t.length-1][0]).toUpperCase():e[0].toUpperCase()})(null==(t=a.user_metadata)?void 0:t.full_name)})})})}),(0,r.jsxs)(g.SQ,{className:"w-56",align:"end",forceMount:!0,children:[(0,r.jsx)(g.lp,{className:"font-normal",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium leading-none",children:"مرحباً"}),(0,r.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:z})]})}),(0,r.jsx)(g.mB,{}),(0,r.jsxs)(g._2,{onClick:P,children:[(0,r.jsx)(d.A,{className:"ml-2 h-4 w-4"}),(0,r.jsx)("span",{children:"تسجيل الخروج"})]})]})]})]}):(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(m.$,{asChild:!0,className:"hidden sm:inline-flex",children:(0,r.jsxs)(l(),{href:"/login",prefetch:!1,children:[(0,r.jsx)(c.A,{className:"h-4 w-4 ml-2"}),"تسجيل الدخول"]})}),(0,r.jsx)(m.$,{variant:"outline",asChild:!0,className:"hidden sm:inline-flex",children:(0,r.jsxs)(l(),{href:"/signup",prefetch:!1,children:[(0,r.jsx)(u.A,{className:"h-4 w-4 ml-2"}),"إنشاء حساب"]})}),(0,r.jsx)(m.$,{variant:"ghost",size:"icon",asChild:!0,className:"sm:hidden",children:(0,r.jsx)(l(),{href:"/login","aria-label":"تسجيل الدخول",prefetch:!1,children:(0,r.jsx)(c.A,{className:"h-5 w-5"})})}),(0,r.jsx)(m.$,{variant:"ghost",size:"icon",asChild:!0,className:"sm:hidden",children:(0,r.jsx)(l(),{href:"/signup","aria-label":"إنشاء حساب",prefetch:!1,children:(0,r.jsx)(u.A,{className:"h-5 w-5"})})})]})]})]})})}_.displayName=y.UC.displayName},6049:(e,t,s)=>{"use strict";s.d(t,{MobileLayout:()=>m});var r=s(5155),a=s(9137),l=s.n(a),n=s(2115),i=s(6267),o=s(60),d=s(7296),c=s(8931),u=s(9598);function m(e){let{children:t}=e,[s,a]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=i.Ii.isNativePlatform();a(e),e&&(d.S.hide(),o.eA.setStyle({style:o.OF.Dark}),o.eA.setBackgroundColor({color:"#ffffff"}),c.q.addListener("backButton",()=>{u.dn.impact({style:u.kn.Light})}),c.q.addListener("appStateChange",e=>{let{isActive:t}=e;t?console.log("App became active"):console.log("App went to background")}))},[]),(0,r.jsxs)("div",{className:"jsx-31899a3006dddf5b "+"mobile-container ".concat(s?"native-app":"web-app"),children:[(0,r.jsx)(l(),{id:"31899a3006dddf5b",children:".mobile-container{min-height:100vh;width:100%;overflow-x:hidden}.native-app{padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom)}.native-app *{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.native-app{-webkit-overflow-scrolling:touch;scroll-behavior:smooth}.native-app::-webkit-scrollbar{display:none}.native-app{-ms-overflow-style:none;scrollbar-width:none}"}),t]})}},8437:(e,t,s)=>{"use strict";s.d(t,{A:()=>o,AuthProvider:()=>i});var r=s(5155),a=s(2115),l=s(3985);let n=(0,a.createContext)(void 0),i=e=>{let{children:t}=e,[s,i]=(0,a.useState)(null),[o,d]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(()=>{let e=localStorage.getItem("mock_user");if(e)try{let t=JSON.parse(e);i(t),d(!1);return}catch(e){console.error("Failed to parse mock user",e)}if(!l.mI)return d(!1);let{data:t}=l.mI.auth.onAuthStateChange((e,t)=>{if(null==t?void 0:t.user)i(t.user);else{let e=localStorage.getItem("mock_user");e?i(JSON.parse(e)):i(null)}d(!1)});return()=>{null==t||t.subscription.unsubscribe()}})()},[]),(0,r.jsx)(n.Provider,{value:{user:s,loading:o},children:t})},o=()=>{let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[303,239,817,998,379,186,441,684,358],()=>t(1346)),_N_E=e.O()}]);