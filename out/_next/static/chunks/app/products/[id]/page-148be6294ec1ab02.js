(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[403],{285:(e,t,a)=>{"use strict";a.d(t,{$:()=>l});var r=a(5155),i=a(2115),s=a(4253),n=a(2085),o=a(9434);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=i.forwardRef((e,t)=>{let{className:a,variant:i,size:n,asChild:l=!1,...d}=e,u=l?s.DX:"button";return(0,r.jsx)(u,{className:(0,o.cn)(c({variant:i,size:n,className:a})),ref:t,...d})});l.displayName="Button"},715:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,6874,23)),Promise.resolve().then(a.bind(a,6167))},3985:(e,t,a)=>{"use strict";a.d(t,{RC:()=>d,Cs:()=>o,P_:()=>c,zh:()=>l,mI:()=>s});var r=a(2354);let i=[{id:"1",name:"منتج تجريبي 1",price:99.99,description:"هذا وصف تجريبي للمنتج الأول",image:"https://placehold.co/600x400.png",image_alt:"منتج تجريبي 1",ai_hint:"منتج عصري وأنيق",category_id:"1"},{id:"2",name:"منتج تجريبي 2",price:149.99,description:"هذا وصف تجريبي للمنتج الثاني",image:"https://placehold.co/600x400.png",image_alt:"منتج تجريبي 2",ai_hint:"منتج عملي ومفيد",category_id:"2"},{id:"3",name:"منتج تجريبي 3",price:199.99,description:"هذا وصف تجريبي للمنتج الثالث",image:"https://placehold.co/600x400.png",image_alt:"منتج تجريبي 3",ai_hint:"منتج فاخر وعالي الجودة",category_id:"1"}],s=(0,r.UU)("https://ebghltixenyygueymcpm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImViZ2hsdGl4ZW55eWd1ZXltY3BtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwODg0OTQsImV4cCI6MjA3MDY2NDQ5NH0.GHT4O30VRY0QNFU3OagalivbbEY-JRrPXRFOcRIbloQ");function n(e){let t=e.image||"https://placehold.co/600x400.png";if(s&&e.image&&!t.startsWith("http")&&!t.startsWith("data:")){let{data:e}=s.storage.from("products").getPublicUrl(t);t=e.publicUrl}return{id:String(e.id),name:e.name||"",price:e.price||0,description:e.description||"",image:t,image_alt:e.image_alt||e.name||"Product image",ai_hint:e.ai_hint||"",category_id:e.category_id||null}}async function o(e){if(!s)return console.warn("Supabase not configured, using fallback product"),i.find(t=>t.id===e);try{let{data:t,error:a}=await s.from("products").select("*").eq("id",e).single();if(a){if("PGRST116"===a.code)return;return console.error("Error fetching product ".concat(e," from Supabase:"),a),i.find(t=>t.id===e)}if(t)return n(t);return}catch(t){return console.error("Exception fetching product by id ".concat(e,": "),t),i.find(t=>t.id===e)}}async function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a=arguments.length>2?arguments[2]:void 0;if(!s){console.warn("Supabase not configured, using fallback products");let r=(e-1)*t,s=i;return a&&(s=s.filter(e=>e.category_id===a)),s.slice(r,r+t)}let r=(e-1)*t;try{let o=s.from("products").select("id, name, price, image").order("created_at",{ascending:!1}).range(r,r+t-1);a&&(o=o.eq("category_id",a));let{data:c,error:l}=await o;if(l){console.error("Error fetching products page ".concat(e,":"),l);let a=(e-1)*t;return i.slice(a,a+t)}return(c||[]).map(n)}catch(t){return console.error("Exception fetching products page ".concat(e,": "),t),[]}}async function l(e){if(!s||!e.trim())return[];try{let t=s.from("products").select("id, name, price, image").range(0,19);t=/^\d+$/.test(e.trim())?t.eq("barcode",e.trim()):t.ilike("name","%".concat(e.trim(),"%"));let{data:a,error:r}=await t.order("created_at",{ascending:!1});if(r)return console.error("Error searching products:",r),[];return(a||[]).map(n)}catch(e){return console.error("Exception searching products:",e),[]}}async function d(e){if(!s)return console.warn("Supabase not configured, returning null for order status"),null;let{data:t,error:a}=await s.from("orders").select("status").eq("user_id",e).order("created_at",{ascending:!1}).limit(1).single();return a||!t?null:t.status}},3991:(e,t,a)=>{"use strict";a.d(t,{g:()=>r}),a(2115);let r=a(5859).b},4469:(e,t,a)=>{"use strict";a.d(t,{CartProvider:()=>o,_:()=>c});var r=a(5155),i=a(2115),s=a(3985);let n=(0,i.createContext)(void 0),o=e=>{let{children:t}=e,[a,o]=(0,i.useState)([]),[c,l]=(0,i.useState)([]),[d,u]=(0,i.useState)(!0);(0,i.useEffect)(()=>{try{let e=localStorage.getItem("cart");e?l(JSON.parse(e)):u(!1)}catch(e){console.error("Failed to parse cart from localStorage",e),u(!1)}},[]),(0,i.useEffect)(()=>{(async()=>{if(0===c.length){o([]),u(!1);return}u(!0);let e=[];for(let t of c){let a="string"==typeof t.id?parseInt(t.id,10):t.id;if(isNaN(a))continue;let r=await (0,s.Cs)(a);r&&e.push({...r,quantity:t.quantity})}o(e),u(!1)})()},[c]),(0,i.useEffect)(()=>{try{let e=a.map(e=>({id:e.id,quantity:e.quantity}));localStorage.setItem("cart",JSON.stringify(e))}catch(e){console.error("Could not save cart to localStorage",e)}},[a]);let f=e=>{o(t=>t.filter(t=>t.id!==e))},p=a.reduce((e,t)=>e+t.price*t.quantity,0),m=a.reduce((e,t)=>e+t.quantity,0);return(0,r.jsx)(n.Provider,{value:{cartItems:a,addToCart:e=>{o(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])},removeFromCart:f,updateQuantity:(e,t)=>{t<=0?f(e):o(a=>a.map(a=>a.id===e?{...a,quantity:t}:a))},clearCart:()=>{o([])},totalPrice:p,totalItems:m,isLoading:d},children:t})},c=()=>{let e=(0,i.useContext)(n);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},4815:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},6167:(e,t,a)=>{"use strict";a.d(t,{ProductDetailsClient:()=>N});var r=a(5155),i=a(6766),s=a(2115),n=a(5821),o=a(5318),c=a(9434);let l=n.bL,d=n.l9,u=n.ZL;n.bm;let f=s.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)(n.hJ,{ref:t,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...i})});f.displayName=n.hJ.displayName;let p=s.forwardRef((e,t)=>{let{className:a,children:i,...s}=e;return(0,r.jsxs)(u,{children:[(0,r.jsx)(f,{}),(0,r.jsxs)(n.UC,{ref:t,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s,children:[i,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(o.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});p.displayName=n.UC.displayName,s.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)(n.hE,{ref:t,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",a),...i})}).displayName=n.hE.displayName,s.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,c.cn)("text-sm text-muted-foreground",a),...i})}).displayName=n.VY.displayName;var m=a(3991);function g(e){let{src:t,alt:a,aiHint:s}=e;return(0,r.jsxs)(l,{children:[(0,r.jsx)(d,{asChild:!0,children:(0,r.jsx)("div",{className:"cursor-zoom-in overflow-hidden rounded-lg border shadow-sm transition-shadow hover:shadow-lg",children:(0,r.jsx)(m.g,{ratio:1,className:"bg-muted",children:(0,r.jsx)(i.default,{src:t,alt:a,"data-ai-hint":s,fill:!0,className:"object-cover w-full h-full transition-transform duration-300 ease-in-out hover:scale-105",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 400px"})})})}),(0,r.jsx)(p,{className:"max-w-4xl w-full p-1 bg-transparent border-0",children:(0,r.jsx)(m.g,{ratio:16/9,children:(0,r.jsx)(i.default,{src:t,alt:a,"data-ai-hint":s,fill:!0,className:"object-contain rounded-lg"})})})]})}var h=a(285),x=a(9100),y=a(4815),b=a(4469),v=a(7481);function N(e){let{product:t}=e,{addToCart:a}=(0,b._)(),{toast:i}=(0,v.dj)();return(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 lg:gap-16",children:[(0,r.jsx)(g,{src:t.image,alt:t.image_alt,aiHint:t.ai_hint}),(0,r.jsxs)("div",{className:"flex flex-col pt-4",children:[(0,r.jsx)("h1",{className:"text-3xl lg:text-4xl font-bold tracking-tight mb-2",children:t.name}),(0,r.jsx)("p",{className:"text-3xl font-bold text-primary",children:t.price.toLocaleString("ar-IQ",{style:"currency",currency:"IQD",minimumFractionDigits:0,maximumFractionDigits:0})}),(0,r.jsx)(x.w,{className:"my-4"}),(0,r.jsxs)("div",{className:"prose prose-lg text-foreground max-w-none",children:[(0,r.jsx)("h2",{className:"font-semibold text-xl mb-2",children:"الوصف"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:t.description})]}),(0,r.jsx)("div",{className:"mt-auto pt-8",children:(0,r.jsxs)(h.$,{size:"lg",className:"w-full bg-accent hover:bg-accent/90 text-accent-foreground text-lg py-6",onClick:()=>{a(t),i({title:"✅ تمت الإضافة إلى السلة",description:'"'.concat(t.name,'" أصبح الآن في سلتك.')})},children:[(0,r.jsx)(y.A,{className:"ml-3 h-6 w-6"}),"أضف إلى السلة"]})})]})]})}},7481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>f});var r=a(2115);let i=0,s=new Map,n=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],l={toasts:[]};function d(e){l=o(l,e),c.forEach(e=>{e(l)})}function u(e){let{...t}=e,a=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,t]=r.useState(l);return r.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},9100:(e,t,a)=>{"use strict";a.d(t,{w:()=>d});var r=a(5155),i=a(2115),s=a(3540),n="horizontal",o=["horizontal","vertical"],c=i.forwardRef((e,t)=>{var a;let{decorative:i,orientation:c=n,...l}=e,d=(a=c,o.includes(a))?c:n;return(0,r.jsx)(s.sG.div,{"data-orientation":d,...i?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...l,ref:t})});c.displayName="Separator";var l=a(9434);let d=i.forwardRef((e,t)=>{let{className:a,orientation:i="horizontal",decorative:s=!0,...n}=e;return(0,r.jsx)(c,{ref:t,decorative:s,orientation:i,className:(0,l.cn)("shrink-0 bg-border","horizontal"===i?"h-[1px] w-full":"h-full w-[1px]",a),...n})});d.displayName=c.displayName},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>s});var r=a(2596),i=a(9688);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[239,817,766,287,441,684,358],()=>t(715)),_N_E=e.O()}]);